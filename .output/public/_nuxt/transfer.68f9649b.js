import{b as I,u as j}from"./entry.b0da6ac6.js";import{j as O,a as _,x as y,y as x,B as s,N as M,O as T,u as p,R as A,V as B,H as V,I as P,Q as ie,P as re,D as H,z as ae,A as oe,L as se,U as le}from"./swiper-vue.487844c5.js";import{a as N,u as E}from"./userData.2f85955e.js";import{a as Z}from"./axios.82afda87.js";import{c as ce}from"./currency.es.57f74176.js";import{_ as de}from"./nuxt-link.51c38150.js";import{e as $,s as ue}from"./showAlert.1825e18a.js";const me={class:"mb-5"},fe={key:0,class:"spinner-border spinner-border-sm text-muted"},pe={key:1,class:"fs-sm"},he={key:0,style:{"margin-bottom":"15px"},bis_skin_checked:"1"},ge=s("h3",{class:"mb-3",style:{color:"#181c32"}},"Transfer",-1),we={style:{"padding-bottom":"9px"},bis_skin_checked:"1"},ye={style:{display:"flex","justify-content":"space-between",color:"#7e8299","font-size":"14px","font-weight":"500","margin-bottom":"8px"},bis_skin_checked:"1"},be=s("div",{style:{"font-family":"Arial, Helvetica, sans-serif"},bis_skin_checked:"1"}," Amount ",-1),xe={class:"text-end fw-bold",style:{"font-family":"Arial, Helvetica, sans-serif"},bis_skin_checked:"1"},ke={style:{display:"flex","justify-content":"space-between",color:"#7e8299","font-size":"14px","font-weight":"500"},bis_skin_checked:"1"},ve=s("div",{style:{"font-family":"Arial, Helvetica, sans-serif"},bis_skin_checked:"1"}," To: ",-1),_e={class:"text-end",style:{"font-family":"Arial, Helvetica, sans-serif"},bis_skin_checked:"1"},De={class:"fw-bold"},Se=s("div",{class:"separator separator-dashed",style:{margin:"15px 0"},bis_skin_checked:"1"},null,-1),Ce=O({__name:"ToElisa",props:{amount:{type:String,required:!0}},setup(e){const t=e,n=I("transfer-recipient"),i=I("transfer-recipient-found",()=>""),r=_(!1),a=()=>{let l=t.amount||0;return ce(l,{symbol:""}).format()},o=()=>{var d;r.value=!0;const l={method:"post",data:{email:n.value.email},url:`${j().public.BE_API}/users/find`,timeout:15e3,headers:{Authorization:"Bearer "+((d=N().userData.value)==null?void 0:d.token)}};Z.request(l).then(u=>{const f=u.data;console.log("Found",f),n.value=f,i.value=f.name}).catch(u=>{i.value=!1}).finally(()=>{r.value=!1})},c=()=>{r.value||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)||(console.log("Valid email"),o())};return(l,d)=>(y(),x("div",null,[s("div",me,[M(s("input",{onInput:d[0]||(d[0]=u=>c()),"onUpdate:modelValue":d[1]||(d[1]=u=>p(n).email=u),name:"email",type:"text",placeholder:"Enter email: jon@gmail.com",class:"form-control disabled money-input fs-5 form-control fw-bold form-control-solid"},null,544),[[T,p(n).email]]),s("div",{class:A([p(i)?"":"text-danger","text-end pe-3 fs-1"])},[p(r)?(y(),x("span",fe)):B("",!0),p(i)===!1&&!p(r)?(y(),x("span",pe,"User doesn't exist")):B("",!0)],2)]),p(i)?(y(),x("div",he,[ge,s("div",we,[s("div",ye,[be,s("div",xe," $"+V(a()),1)]),s("div",ke,[ve,s("div",_e,[P(V(p(n).name)+" ",1),s("div",De,V(p(n).email),1)])]),Se])])):B("",!0)]))}}),Fe={class:"row row-cols-1 row-cols-lg-2 g-4"},Ie={class:"col"},Pe={class:"col"},Le={class:"col"},Ve=s("div",{class:"col"},[s("input",{name:"routing_number",type:"text",placeholder:"Routing Number (optional)",class:"form-control disabled money-input fs-5 form-control fw-bold form-control-solid"}),s("div",{class:"text-end d-none pe-3 fs-1"},[s("span",{class:"fs-sm text-muted"},"Required only if the receiving bank requires it")])],-1),Me=O({__name:"ToBank",setup(e){const t=I("transaction-form");return(n,i)=>(y(),x("div",Fe,[s("div",Ie,[M(s("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>p(t).beneficiary.bank=r),name:"bank_name",type:"text",placeholder:"Bank Name",class:"form-control disabled money-input fs-5 form-control fw-bold form-control-solid"},null,512),[[T,p(t).beneficiary.bank]])]),s("div",Pe,[M(s("input",{required:"","onUpdate:modelValue":i[1]||(i[1]=r=>p(t).beneficiary.name=r),name:"account_holder_name",type:"text",placeholder:"Account Holder Name",class:"form-control disabled money-input fs-5 form-control fw-bold form-control-solid"},null,512),[[T,p(t).beneficiary.name]])]),s("div",Le,[M(s("input",{required:"","onUpdate:modelValue":i[2]||(i[2]=r=>p(t).beneficiary.destinationAccount=r),name:"account_number",type:"text",placeholder:"Account Number",class:"form-control disabled money-input fs-5 form-control fw-bold form-control-solid"},null,512),[[T,p(t).beneficiary.destinationAccount]])]),Ve]))}});var L=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F=function(e,t,n,i,r,a,o,c,l,d){var u=this;u.numeralDecimalMark=e||".",u.numeralIntegerScale=t>0?t:0,u.numeralDecimalScale=n>=0?n:2,u.numeralThousandsGroupStyle=i||F.groupStyle.thousand,u.numeralPositiveOnly=!!r,u.stripLeadingZeroes=a!==!1,u.prefix=o||o===""?o:"",u.signBeforePrefix=!!c,u.tailPrefix=!!l,u.delimiter=d||d===""?d:",",u.delimiterRE=d?new RegExp("\\"+d,"g"):""};F.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"};F.prototype={getRawValue:function(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(e){var t=this,n,i,r,a,o="";switch(e=e.replace(/[A-Za-z]/g,"").replace(t.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",t.numeralPositiveOnly?"":"-").replace("M",t.numeralDecimalMark),t.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),i=e.slice(0,1)==="-"?"-":"",typeof t.prefix<"u"?t.signBeforePrefix?r=i+t.prefix:r=t.prefix+i:r=i,a=e,e.indexOf(t.numeralDecimalMark)>=0&&(n=e.split(t.numeralDecimalMark),a=n[0],o=t.numeralDecimalMark+n[1].slice(0,t.numeralDecimalScale)),i==="-"&&(a=a.slice(1)),t.numeralIntegerScale>0&&(a=a.slice(0,t.numeralIntegerScale)),t.numeralThousandsGroupStyle){case F.groupStyle.lakh:a=a.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+t.delimiter);break;case F.groupStyle.wan:a=a.replace(/(\d)(?=(\d{4})+$)/g,"$1"+t.delimiter);break;case F.groupStyle.thousand:a=a.replace(/(\d)(?=(\d{3})+$)/g,"$1"+t.delimiter);break}return t.tailPrefix?i+a.toString()+(t.numeralDecimalScale>0?o.toString():"")+t.prefix:r+a.toString()+(t.numeralDecimalScale>0?o.toString():"")}};var Te=F,q=function(e,t,n){var i=this;i.date=[],i.blocks=[],i.datePattern=e,i.dateMin=t.split("-").reverse().map(function(r){return parseInt(r,10)}),i.dateMin.length===2&&i.dateMin.unshift(0),i.dateMax=n.split("-").reverse().map(function(r){return parseInt(r,10)}),i.dateMax.length===2&&i.dateMax.unshift(0),i.initBlocks()};q.prototype={initBlocks:function(){var e=this;e.datePattern.forEach(function(t){t==="Y"?e.blocks.push(4):e.blocks.push(2)})},getISOFormatDate:function(){var e=this,t=e.date;return t[2]?t[2]+"-"+e.addLeadingZero(t[1])+"-"+e.addLeadingZero(t[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(e){var t=this,n="";return e=e.replace(/[^\d]/g,""),t.blocks.forEach(function(i,r){if(e.length>0){var a=e.slice(0,i),o=a.slice(0,1),c=e.slice(i);switch(t.datePattern[r]){case"d":a==="00"?a="01":parseInt(o,10)>3?a="0"+o:parseInt(a,10)>31&&(a="31");break;case"m":a==="00"?a="01":parseInt(o,10)>1?a="0"+o:parseInt(a,10)>12&&(a="12");break}n+=a,e=c}}),this.getFixedDateString(n)},getFixedDateString:function(e){var t=this,n=t.datePattern,i=[],r=0,a=0,o=0,c=0,l=0,d=0,u,f,w,g=!1;e.length===4&&n[0].toLowerCase()!=="y"&&n[1].toLowerCase()!=="y"&&(c=n[0]==="d"?0:2,l=2-c,u=parseInt(e.slice(c,c+2),10),f=parseInt(e.slice(l,l+2),10),i=this.getFixedDate(u,f,0)),e.length===8&&(n.forEach(function(D,S){switch(D){case"d":r=S;break;case"m":a=S;break;default:o=S;break}}),d=o*2,c=r<=o?r*2:r*2+2,l=a<=o?a*2:a*2+2,u=parseInt(e.slice(c,c+2),10),f=parseInt(e.slice(l,l+2),10),w=parseInt(e.slice(d,d+4),10),g=e.slice(d,d+4).length===4,i=this.getFixedDate(u,f,w)),e.length===4&&(n[0]==="y"||n[1]==="y")&&(l=n[0]==="m"?0:2,d=2-l,f=parseInt(e.slice(l,l+2),10),w=parseInt(e.slice(d,d+2),10),g=e.slice(d,d+2).length===2,i=[0,f,w]),e.length===6&&(n[0]==="Y"||n[1]==="Y")&&(l=n[0]==="m"?0:4,d=2-.5*l,f=parseInt(e.slice(l,l+2),10),w=parseInt(e.slice(d,d+4),10),g=e.slice(d,d+4).length===4,i=[0,f,w]),i=t.getRangeFixedDate(i),t.date=i;var b=i.length===0?e:n.reduce(function(D,S){switch(S){case"d":return D+(i[0]===0?"":t.addLeadingZero(i[0]));case"m":return D+(i[1]===0?"":t.addLeadingZero(i[1]));case"y":return D+(g?t.addLeadingZeroForYear(i[2],!1):"");case"Y":return D+(g?t.addLeadingZeroForYear(i[2],!0):"")}},"");return b},getRangeFixedDate:function(e){var t=this,n=t.datePattern,i=t.dateMin||[],r=t.dateMax||[];return!e.length||i.length<3&&r.length<3||n.find(function(a){return a.toLowerCase()==="y"})&&e[2]===0?e:r.length&&(r[2]<e[2]||r[2]===e[2]&&(r[1]<e[1]||r[1]===e[1]&&r[0]<e[0]))?r:i.length&&(i[2]>e[2]||i[2]===e[2]&&(i[1]>e[1]||i[1]===e[1]&&i[0]>e[0]))?i:e},getFixedDate:function(e,t,n){return e=Math.min(e,31),t=Math.min(t,12),n=parseInt(n||0,10),(t<7&&t%2===0||t>8&&t%2===1)&&(e=Math.min(e,t===2?this.isLeapYear(n)?29:28:30)),[e,t,n]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},addLeadingZero:function(e){return(e<10?"0":"")+e},addLeadingZeroForYear:function(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}};var Ae=q,Y=function(e,t){var n=this;n.time=[],n.blocks=[],n.timePattern=e,n.timeFormat=t,n.initBlocks()};Y.prototype={initBlocks:function(){var e=this;e.timePattern.forEach(function(){e.blocks.push(2)})},getISOFormatTime:function(){var e=this,t=e.time;return t[2]?e.addLeadingZero(t[0])+":"+e.addLeadingZero(t[1])+":"+e.addLeadingZero(t[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){var e=this;return String(e.timeFormat)==="12"?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(e){var t=this,n="";e=e.replace(/[^\d]/g,"");var i=t.getTimeFormatOptions();return t.blocks.forEach(function(r,a){if(e.length>0){var o=e.slice(0,r),c=o.slice(0,1),l=e.slice(r);switch(t.timePattern[a]){case"h":parseInt(c,10)>i.maxHourFirstDigit?o="0"+c:parseInt(o,10)>i.maxHours&&(o=i.maxHours+"");break;case"m":case"s":parseInt(c,10)>i.maxMinutesFirstDigit?o="0"+c:parseInt(o,10)>i.maxMinutes&&(o=i.maxMinutes+"");break}n+=o,e=l}}),this.getFixedTimeString(n)},getFixedTimeString:function(e){var t=this,n=t.timePattern,i=[],r=0,a=0,o=0,c=0,l=0,d=0,u,f,w;return e.length===6&&(n.forEach(function(g,b){switch(g){case"s":r=b*2;break;case"m":a=b*2;break;case"h":o=b*2;break}}),d=o,l=a,c=r,u=parseInt(e.slice(c,c+2),10),f=parseInt(e.slice(l,l+2),10),w=parseInt(e.slice(d,d+2),10),i=this.getFixedTime(w,f,u)),e.length===4&&t.timePattern.indexOf("s")<0&&(n.forEach(function(g,b){switch(g){case"m":a=b*2;break;case"h":o=b*2;break}}),d=o,l=a,u=0,f=parseInt(e.slice(l,l+2),10),w=parseInt(e.slice(d,d+2),10),i=this.getFixedTime(w,f,u)),t.time=i,i.length===0?e:n.reduce(function(g,b){switch(b){case"s":return g+t.addLeadingZero(i[2]);case"m":return g+t.addLeadingZero(i[1]);case"h":return g+t.addLeadingZero(i[0])}},"")},getFixedTime:function(e,t,n){return n=Math.min(parseInt(n||0,10),60),t=Math.min(t,60),e=Math.min(e,60),[e,t,n]},addLeadingZero:function(e){return(e<10?"0":"")+e}};var Be=Y,z=function(e,t){var n=this;n.delimiter=t||t===""?t:" ",n.delimiterRE=t?new RegExp("\\"+t,"g"):"",n.formatter=e};z.prototype={setFormatter:function(e){this.formatter=e},format:function(e){var t=this;t.formatter.clear(),e=e.replace(/[^\d+]/g,""),e=e.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+"),e=e.replace(t.delimiterRE,"");for(var n="",i,r=!1,a=0,o=e.length;a<o;a++)i=t.formatter.inputDigit(e.charAt(a)),/[\s()-]/g.test(i)?(n=i,r=!0):r||(n=i);return n=n.replace(/[()]/g,""),n=n.replace(/[\s-]/g,t.delimiter),n}};var Ee=z,R={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(e){var t=e.reduce(function(n,i){return n+i},0);return e.concat(19-t)},getInfo:function(e,t){var n=R.blocks,i=R.re;t=!!t;for(var r in i)if(i[r].test(e)){var a=n[r];return{type:r,blocks:t?this.getStrictBlocks(a):a}}return{type:"unknown",blocks:t?this.getStrictBlocks(n.general):n.general}}},$e=R,Re={noop:function(){},strip:function(e,t){return e.replace(t,"")},getPostDelimiter:function(e,t,n){if(n.length===0)return e.slice(-t.length)===t?t:"";var i="";return n.forEach(function(r){e.slice(-r.length)===r&&(i=r)}),i},getDelimiterREByDelimiter:function(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(e,t,n,i,r){return t.length===e?n.length:e+this.getPositionOffset(e,t,n,i,r)},getPositionOffset:function(e,t,n,i,r){var a,o,c;return a=this.stripDelimiters(t.slice(0,e),i,r),o=this.stripDelimiters(n.slice(0,e),i,r),c=a.length-o.length,c!==0?c/Math.abs(c):0},stripDelimiters:function(e,t,n){var i=this;if(n.length===0){var r=t?i.getDelimiterREByDelimiter(t):"";return e.replace(r,"")}return n.forEach(function(a){a.split("").forEach(function(o){e=e.replace(i.getDelimiterREByDelimiter(o),"")})}),e},headStr:function(e,t){return e.slice(0,t)},getMaxLength:function(e){return e.reduce(function(t,n){return t+n},0)},getPrefixStrippedValue:function(e,t,n,i,r,a,o,c,l){if(n===0)return e;if(e===t&&e!=="")return"";if(l&&e.slice(0,1)=="-"){var d=i.slice(0,1)=="-"?i.slice(1):i;return"-"+this.getPrefixStrippedValue(e.slice(1),t,n,d,r,a,o,c,l)}if(i.slice(0,n)!==t&&!c)return o&&!i&&e?e:"";if(i.slice(-n)!==t&&c)return o&&!i&&e?e:"";var u=this.stripDelimiters(i,r,a);return e.slice(0,n)!==t&&!c?u.slice(n):e.slice(-n)!==t&&c?u.slice(0,-n-1):c?e.slice(0,-n):e.slice(n)},getFirstDiffIndex:function(e,t){for(var n=0;e.charAt(n)===t.charAt(n);)if(e.charAt(n++)==="")return-1;return n},getFormattedValue:function(e,t,n,i,r,a){var o="",c=r.length>0,l="";return n===0?e:(t.forEach(function(d,u){if(e.length>0){var f=e.slice(0,d),w=e.slice(d);c?l=r[a?u-1:u]||l:l=i,a?(u>0&&(o+=l),o+=f):(o+=f,f.length===d&&u<n-1&&(o+=l)),e=w}}),o)},fixPrefixCursor:function(e,t,n,i){if(e){var r=e.value,a=n||i[0]||" ";if(!(!e.setSelectionRange||!t||t.length+a.length<=r.length)){var o=r.length*2;setTimeout(function(){e.setSelectionRange(o,o)},1)}}},checkFullSelection:function(e){try{var t=window.getSelection()||document.getSelection()||{};return t.toString().length===e.length}catch{}return!1},setSelection:function(e,t,n){if(e===this.getActiveElement(n)&&!(e&&e.value.length<=t))if(e.createTextRange){var i=e.createTextRange();i.move("character",t),i.select()}else try{e.setSelectionRange(t,t)}catch{console.warn("The input element type does not support selection")}},getActiveElement:function(e){var t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(e,t){return!this.isAndroid()||!e||!t?!1:t===e.slice(0,-1)}},Ue=Re,Oe={assign:function(e,t){return e=e||{},t=t||{},e.creditCard=!!t.creditCard,e.creditCardStrictMode=!!t.creditCardStrictMode,e.creditCardType="",e.onCreditCardTypeChanged=t.onCreditCardTypeChanged||function(){},e.phone=!!t.phone,e.phoneRegionCode=t.phoneRegionCode||"AU",e.phoneFormatter={},e.time=!!t.time,e.timePattern=t.timePattern||["h","m","s"],e.timeFormat=t.timeFormat||"24",e.timeFormatter={},e.date=!!t.date,e.datePattern=t.datePattern||["d","m","Y"],e.dateMin=t.dateMin||"",e.dateMax=t.dateMax||"",e.dateFormatter={},e.numeral=!!t.numeral,e.numeralIntegerScale=t.numeralIntegerScale>0?t.numeralIntegerScale:0,e.numeralDecimalScale=t.numeralDecimalScale>=0?t.numeralDecimalScale:2,e.numeralDecimalMark=t.numeralDecimalMark||".",e.numeralThousandsGroupStyle=t.numeralThousandsGroupStyle||"thousand",e.numeralPositiveOnly=!!t.numeralPositiveOnly,e.stripLeadingZeroes=t.stripLeadingZeroes!==!1,e.signBeforePrefix=!!t.signBeforePrefix,e.tailPrefix=!!t.tailPrefix,e.swapHiddenInput=!!t.swapHiddenInput,e.numericOnly=e.creditCard||e.date||!!t.numericOnly,e.uppercase=!!t.uppercase,e.lowercase=!!t.lowercase,e.prefix=e.creditCard||e.date?"":t.prefix||"",e.noImmediatePrefix=!!t.noImmediatePrefix,e.prefixLength=e.prefix.length,e.rawValueTrimPrefix=!!t.rawValueTrimPrefix,e.copyDelimiter=!!t.copyDelimiter,e.initValue=t.initValue!==void 0&&t.initValue!==null?t.initValue.toString():"",e.delimiter=t.delimiter||t.delimiter===""?t.delimiter:t.date?"/":t.time?":":t.numeral?",":(t.phone," "),e.delimiterLength=e.delimiter.length,e.delimiterLazyShow=!!t.delimiterLazyShow,e.delimiters=t.delimiters||[],e.blocks=t.blocks||[],e.blocksLength=e.blocks.length,e.root=typeof L=="object"&&L?L:window,e.document=t.document||e.root.document,e.maxLength=0,e.backspace=!1,e.result="",e.onValueChanged=t.onValueChanged||function(){},e}},He=Oe,m=function(e,t){var n=this,i=!1;if(typeof e=="string"?(n.element=document.querySelector(e),i=document.querySelectorAll(e).length>1):typeof e.length<"u"&&e.length>0?(n.element=e[0],i=e.length>1):n.element=e,!n.element)throw new Error("[cleave.js] Please check the element");if(i)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch{}t.initValue=n.element.value,n.properties=m.DefaultProperties.assign({},t),n.init()};m.prototype={init:function(){var e=this,t=e.properties;if(!t.numeral&&!t.phone&&!t.creditCard&&!t.time&&!t.date&&t.blocksLength===0&&!t.prefix){e.onInput(t.initValue);return}t.maxLength=m.Util.getMaxLength(t.blocks),e.isAndroid=m.Util.isAndroid(),e.lastInputValue="",e.isBackward="",e.onChangeListener=e.onChange.bind(e),e.onKeyDownListener=e.onKeyDown.bind(e),e.onFocusListener=e.onFocus.bind(e),e.onCutListener=e.onCut.bind(e),e.onCopyListener=e.onCopy.bind(e),e.initSwapHiddenInput(),e.element.addEventListener("input",e.onChangeListener),e.element.addEventListener("keydown",e.onKeyDownListener),e.element.addEventListener("focus",e.onFocusListener),e.element.addEventListener("cut",e.onCutListener),e.element.addEventListener("copy",e.onCopyListener),e.initPhoneFormatter(),e.initDateFormatter(),e.initTimeFormatter(),e.initNumeralFormatter(),(t.initValue||t.prefix&&!t.noImmediatePrefix)&&e.onInput(t.initValue)},initSwapHiddenInput:function(){var e=this,t=e.properties;if(t.swapHiddenInput){var n=e.element.cloneNode(!0);e.element.parentNode.insertBefore(n,e.element),e.elementSwapHidden=e.element,e.elementSwapHidden.type="hidden",e.element=n,e.element.id=""}},initNumeralFormatter:function(){var e=this,t=e.properties;t.numeral&&(t.numeralFormatter=new m.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var e=this,t=e.properties;t.time&&(t.timeFormatter=new m.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=m.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var e=this,t=e.properties;t.date&&(t.dateFormatter=new m.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=m.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var e=this,t=e.properties;if(t.phone)try{t.phoneFormatter=new m.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch{throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(e){var t=this,n=e.which||e.keyCode;t.lastInputValue=t.element.value,t.isBackward=n===8},onChange:function(e){var t=this,n=t.properties,i=m.Util;t.isBackward=t.isBackward||e.inputType==="deleteContentBackward";var r=i.getPostDelimiter(t.lastInputValue,n.delimiter,n.delimiters);t.isBackward&&r?n.postDelimiterBackspace=r:n.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var e=this,t=e.properties;e.lastInputValue=e.element.value,t.prefix&&t.noImmediatePrefix&&!e.element.value&&this.onInput(t.prefix),m.Util.fixPrefixCursor(e.element,t.prefix,t.delimiter,t.delimiters)},onCut:function(e){m.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.onInput(""))},onCopy:function(e){m.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(e)},copyClipboardData:function(e){var t=this,n=t.properties,i=m.Util,r=t.element.value,a="";n.copyDelimiter?a=r:a=i.stripDelimiters(r,n.delimiter,n.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",a):window.clipboardData.setData("Text",a),e.preventDefault()}catch{}},onInput:function(e){var t=this,n=t.properties,i=m.Util,r=i.getPostDelimiter(e,n.delimiter,n.delimiters);if(!n.numeral&&n.postDelimiterBackspace&&!r&&(e=i.headStr(e,e.length-n.postDelimiterBackspace.length)),n.phone){n.prefix&&(!n.noImmediatePrefix||e.length)?n.result=n.prefix+n.phoneFormatter.format(e).slice(n.prefix.length):n.result=n.phoneFormatter.format(e),t.updateValueState();return}if(n.numeral){n.prefix&&n.noImmediatePrefix&&e.length===0?n.result="":n.result=n.numeralFormatter.format(e),t.updateValueState();return}if(n.date&&(e=n.dateFormatter.getValidatedDate(e)),n.time&&(e=n.timeFormatter.getValidatedTime(e)),e=i.stripDelimiters(e,n.delimiter,n.delimiters),e=i.getPrefixStrippedValue(e,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix,n.tailPrefix,n.signBeforePrefix),e=n.numericOnly?i.strip(e,/[^\d]/g):e,e=n.uppercase?e.toUpperCase():e,e=n.lowercase?e.toLowerCase():e,n.prefix&&(n.tailPrefix?e=e+n.prefix:e=n.prefix+e,n.blocksLength===0)){n.result=e,t.updateValueState();return}n.creditCard&&t.updateCreditCardPropsByValue(e),e=i.headStr(e,n.maxLength),n.result=i.getFormattedValue(e,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow),t.updateValueState()},updateCreditCardPropsByValue:function(e){var t=this,n=t.properties,i=m.Util,r;i.headStr(n.result,4)!==i.headStr(e,4)&&(r=m.CreditCardDetector.getInfo(e,n.creditCardStrictMode),n.blocks=r.blocks,n.blocksLength=n.blocks.length,n.maxLength=i.getMaxLength(n.blocks),n.creditCardType!==r.type&&(n.creditCardType=r.type,n.onCreditCardTypeChanged.call(t,n.creditCardType)))},updateValueState:function(){var e=this,t=m.Util,n=e.properties;if(e.element){var i=e.element.selectionEnd,r=e.element.value,a=n.result;if(i=t.getNextCursorPosition(i,r,a,n.delimiter,n.delimiters),e.isAndroid){window.setTimeout(function(){e.element.value=a,t.setSelection(e.element,i,n.document,!1),e.callOnValueChanged()},1);return}e.element.value=a,n.swapHiddenInput&&(e.elementSwapHidden.value=e.getRawValue()),t.setSelection(e.element,i,n.document,!1),e.callOnValueChanged()}},callOnValueChanged:function(){var e=this,t=e.properties;t.onValueChanged.call(e,{target:{name:e.element.name,value:t.result,rawValue:e.getRawValue()}})},setPhoneRegionCode:function(e){var t=this,n=t.properties;n.phoneRegionCode=e,t.initPhoneFormatter(),t.onChange()},setRawValue:function(e){var t=this,n=t.properties;e=e!=null?e.toString():"",n.numeral&&(e=e.replace(".",n.numeralDecimalMark)),n.postDelimiterBackspace=!1,t.element.value=e,t.onInput(e)},getRawValue:function(){var e=this,t=e.properties,n=m.Util,i=e.element.value;return t.rawValueTrimPrefix&&(i=n.getPrefixStrippedValue(i,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),t.numeral?i=t.numeralFormatter.getRawValue(i):i=n.stripDelimiters(i,t.delimiter,t.delimiters),i},getISOFormatDate:function(){var e=this,t=e.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var e=this,t=e.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var e=this;e.element.removeEventListener("input",e.onChangeListener),e.element.removeEventListener("keydown",e.onKeyDownListener),e.element.removeEventListener("focus",e.onFocusListener),e.element.removeEventListener("cut",e.onCutListener),e.element.removeEventListener("copy",e.onCopyListener)},toString:function(){return"[Cleave Object]"}};m.NumeralFormatter=Te;m.DateFormatter=Ae;m.TimeFormatter=Be;m.PhoneFormatter=Ee;m.CreditCardDetector=$e;m.Util=Ue;m.DefaultProperties=He;(typeof L=="object"&&L?L:window).Cleave=m;var je=m,U=(e=>(e.DEBIT="debit",e.CREDIT="credit",e.WITHDRAWAL="withdrawal",e.SEND="send",e))(U||{});const Ne={class:"card card-flush card-custom border-0 h-md-100 mb-5 mb-lg-10"},Ze=s("div",{class:"card-header text-center d-flex justify-content-center p-4"},[s("h1",{class:"text-center h2 pt-4 fw-bold"},"Transfer")],-1),qe={class:"card-body"},Ye={class:"mb-5"},ze=["disabled"],Ge={key:0,class:"mb-8 min-h-250px"},Ke={class:"d-flex flex-center flex-row mb-5 gap-2"},We=s("i",{class:"ki-solid ki-dollar fs-3"},null,-1),Qe=s("i",{class:"ki-solid ki-bank fs-3"},null,-1),Je={key:1},Xe={class:"d-flex flex-row mb-8 justify-content-end w-100 d-none"},et=s("button",{type:"button",class:"btn btn-sm btn-light-primary fw-semibold me-2"},[s("i",{class:"ki-solid ki-dollar"}),P(" Request payment ")],-1),tt=s("i",{class:"ki-duotone ki-scan-barcode"},[s("i",{class:"path1"}),s("i",{class:"path2"}),s("i",{class:"path3"}),s("i",{class:"path4"}),s("i",{class:"path5"}),s("i",{class:"path6"}),s("i",{class:"path7"}),s("i",{class:"path8"})],-1),nt={class:"row flex-row row-cols-3 justify-content-end"},it={class:"col justify-content-center d-flex mb-4"},rt=["onClick"],at={class:"col justify-content-center d-flex mb-4"},ot=s("i",{class:"ki-solid ki-arrow-left fs-2x fw-bold"},null,-1),st=[ot],lt=["disabled"],ct={class:"indicator-label"},dt={key:0},ut={key:1},mt=s("span",{class:"indicator-progress"},[P(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),kt=O({__name:"transfer",setup(e){const t=_(),n=_(),i=E().account,r=j(),a=_(!1),o=_(!0),c=I("transaction-form"),l=_({amount:""}),d=_(),u=[{num:1},{num:2},{num:3},{num:4},{num:5},{num:6},{num:7},{num:8},{num:9},{num:"."},{num:0}],f=_(!1),w=_({id:"",name:"",email:""}),g=I("transfer-recipient",()=>w.value),b=I("transfer-recipient-found",()=>""),D=k=>{const h=l.value.amount+k;l.value.amount=h,n.value.setRawValue(h)},S=async()=>{f.value&&(await new Promise(k=>setTimeout(k,160)),console.log("Del"),l.value.amount=l.value.amount.slice(0,-1),n.value.setRawValue(l.value.amount),requestAnimationFrame(S))},G=()=>{f.value=!1},K=()=>{f.value=!0,S()},W=k=>{const h=t.value.value.replace(/[a-zA-Z]/g,"");if(h.includes(".")){const v=h.split(".");l.value.amount=v[0]+"."+v[1].slice(0,2),console.log(l.value.amount)}},Q=()=>{d.value.removeAttribute("data-kt-indicator"),a.value=!1};function J(k){for(const h in k)if(h!=="id"&&h!=="userId"&&!k[h])return!0;return!1}const X=()=>o.value&&!b.value?!0:o.value?!1:J(c.value.beneficiary),ee=()=>{var h;if(Number(l.value.amount)<=0){$("Amount must be greater than zero!");return}if(!i.value.amount||Number(l.value.amount)>i.value.amount){$("Insufficient balance!");return}if(!a.value){a.value=!0;return}c.value.amount=Number(l.value.amount),o.value?(c.value.type=U.SEND,c.value.receiverId=g.value.id,c.value.beneficiary.bank=r.public.APP,c.value.beneficiary.destinationAccount=g.value.email,c.value.beneficiary.name=g.value.name,c.value.beneficiary.userId=g.value.id):c.value.type=U.DEBIT,c.value.senderId=E().data.value.id,d.value.setAttribute("data-kt-indicator","on"),console.log(c.value);const k={method:"post",data:c.value,url:`${r.public.BE_API}/transactions`,timeout:15e3,headers:{Authorization:"Bearer "+((h=N().userData.value)==null?void 0:h.token)}};Z.request(k).then(v=>{v.data,E().account.value.amount-=c.value.amount,ue("Transaction successful")}).catch(v=>{console.log(v),v.response.data,$("Transaction error.")}).finally(()=>{d.value.removeAttribute("data-kt-indicator")})};return ie(()=>{n.value=new je(t.value,{numeral:!0,numeralThousandsGroupStyle:"thousand",numeralDecimalMark:".",numeralDecimalScale:2})}),(k,h)=>{const v=Ce,te=Me,ne=de;return y(),x("div",Ne,[Ze,s("div",qe,[s("form",{onSubmit:h[4]||(h[4]=re(C=>ee(),["prevent"])),class:"px-5 px-md-0 px-xl-15"},[s("div",Ye,[s("input",{disabled:p(a),ref_key:"moneyInput",ref:t,onKeydown:h[0]||(h[0]=C=>W()),type:"text",placeholder:"0",class:"form-control disabled money-input fs-2 form-control-lg text-center fw-bold form-control-solid"},null,40,ze)]),p(a)?(y(),x("div",Ge,[s("div",Ke,[s("button",{onClick:h[1]||(h[1]=C=>o.value=!0),class:A([p(o)?"active":"","btn px-0 w-100 btn-light-primary btn-active-light-info fw-semibold"]),type:"button"},[We,P(" To "+V(k.$config.public.APP),1)],2),s("button",{onClick:h[2]||(h[2]=C=>o.value=!1),class:A([p(o)?"":"active","btn w-75 btn-light-primary h-100 btn-active-light-info fw-semibold"]),type:"button"},[Qe,P(" Banks ")],2)]),p(o)?(y(),H(v,{key:0,amount:p(l).amount},null,8,["amount"])):(y(),H(te,{key:1}))])):(y(),x("div",Je,[s("div",Xe,[et,ae(ne,{to:"/app/scan",class:"btn btn-sm btn-light-warning fw-semibold me-2"},{default:oe(()=>[tt,P(" Scan ")]),_:1})]),s("div",nt,[(y(),x(se,null,le(u,C=>s("div",it,[s("button",{type:"button",onClick:ft=>D(C.num),class:"btn btn-active-light-primary p-0 btn-icon fw-bold fs-2"},V(C.num),9,rt)])),64)),s("div",at,[s("button",{type:"button",onMouseup:G,onMousedown:K,class:"btn btn-active-light-danger btn-icon-danger btn-icon fw-bold fs-2"},st,32)])])])),s("div",{class:A([p(a)?"d-flex flex-row":"","mt-4"])},[p(a)?(y(),x("button",{key:0,onClick:h[3]||(h[3]=C=>Q()),class:"btn btn-light-primary me-3"}," Back ")):B("",!0),s("button",{disabled:p(a)&&X(),ref_key:"submitButton",ref:d,type:"submit",class:"btn btn-primary btn-icon fw-bold fs-2 w-100"},[s("span",ct,[p(a)?(y(),x("span",dt,"Submit")):(y(),x("span",ut,"Next"))]),mt],8,lt)],2)],32)])])}}});export{kt as default};
