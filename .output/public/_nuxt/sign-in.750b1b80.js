import{_ as E}from"./NFTexLogo.acdb316d.js";import{_ as N}from"./nuxt-link.51c38150.js";import{b as $,u as h,d as V}from"./entry.b0da6ac6.js";import{j as C,a as m,x as _,y as b,B as s,P,N as w,O as k,u as a,I as u,Q as q,z as y,H as F,V as I,A as M,D as j}from"./swiper-vue.487844c5.js";import{e as x,s as D}from"./showAlert.1825e18a.js";import{a as S}from"./axios.82afda87.js";import{u as T}from"./index.4d0f0352.js";import{a as U}from"./userData.2f85955e.js";import{_ as z}from"./credit-card.4fb02539.js";import"./_plugin-vue_export-helper.c27b6911.js";const H={class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10",bis_skin_checked:"1"},L={class:"d-flex flex-center flex-column flex-lg-row-fluid",bis_skin_checked:"1"},O={class:"w-lg-500px p-10",bis_skin_checked:"1"},Q=s("div",{class:"text-center mb-10",bis_skin_checked:"1"},[s("h1",{class:"text-dark fw-bolder mb-3"}," Forgot Password ? "),s("div",{class:"text-gray-500 fw-semibold fs-6",bis_skin_checked:"1"},[u(" Enter your email to reset your password. "),s("br")])],-1),W={class:"fv-row mb-8 fv-plugins-icon-container fv-plugins-bootstrap5-row-invalid",bis_skin_checked:"1"},Y=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},[s("div",{"data-field":"email","data-validator":"notEmpty",bis_skin_checked:"1"},[u(" Email address is required. "),s("br"),s("small",{class:"fs-7 text-info"},"You'll receive a password reset email if your account exists.")])],-1),G={class:"d-flex flex-wrap justify-content-center pb-lg-0",bis_skin_checked:"1"},J=s("button",{type:"submit",id:"kt_password_reset_submit",class:"btn btn-primary me-4"},[s("span",{class:"indicator-label"}," Submit"),s("span",{class:"indicator-progress"},[u(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),K=C({__name:"ForgotPassword",setup(A){const v=h(),r=m(!1),p=$("forgot"),n=m({email:""}),c=()=>{p.value=!1},f=()=>{if(!n.value.email)return x(null);const o={method:"post",data:n.value,url:`${v.public.BE_API}/auth/request-password-reset`,timeout:15e3};S.request(o).then(t=>{console.log(t.data),D("Sent. Check your email to continue")}).catch(t=>{x("Account was not found. Check your email and try again."),console.log(t),t.response.data}).finally(()=>{r.value=!1})};return(o,t)=>(_(),b("div",H,[s("div",L,[s("div",O,[s("form",{onSubmit:t[2]||(t[2]=P(d=>f(),["prevent"])),class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"",id:"kt_password_reset_form",action:"#"},[Q,s("div",W,[w(s("input",{type:"text",placeholder:"Email",name:"email",class:"form-control bg-transparent","onUpdate:modelValue":t[0]||(t[0]=d=>a(n).email=d)},null,512),[[k,a(n).email]]),Y]),s("div",G,[J,s("a",{onClick:t[1]||(t[1]=d=>c()),role:"button",class:"btn btn-light",bis_skin_checked:"1"},"Cancel")])],32)])])]))}}),X={class:"d-flex card flex-column flex-root border"},Z={class:"d-flex card-body flex-column flex-lg-row flex-column-fluid"},R={class:"d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center"},ss={class:"d-flex flex-column flex-center p-6 p-lg-10 w-100"},es=s("img",{class:"d-none d-lg-block mx-auto w-300px w-lg-75 w-xl-250px mb-10 mb-lg-20 mt-15",src:z,alt:""},null,-1),ts=s("h1",{class:"d-none d-lg-block text-white fs-2qx fw-bold text-center mb-7"}," Welcome Back ",-1),os={key:0,class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10"},as={class:"d-flex flex-center flex-column flex-lg-row-fluid"},ls={class:"card w-lg-500px p-md-10"},ns={class:"card-body"},is=["onSubmit"],rs=s("div",{class:"text-center mb-11"},[s("h1",{class:"text-dark fw-bolder mb-3"}," Sign In ")],-1),cs=s("div",{class:"separator separator-content my-14"},null,-1),ds={class:"fv-row mb-8"},ms={class:"fv-row mb-3"},us={key:0,class:"text-danger fs-sm mt-3 mb-3"},_s={class:"d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8"},ps=s("div",null,null,-1),fs={class:"d-grid mb-10"},gs=s("span",{class:"indicator-label"}," Sign In",-1),bs=s("span",{class:"indicator-progress"},[u(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),xs=[gs,bs],vs={class:"text-gray-500 text-center fw-semibold fs-6"},Es=C({__name:"sign-in",setup(A){T({title:`Sign in - ${h().public.APP}`}),V({script:[{src:"/assets/js/custom/authentication/sign-in/general.js"}]});const v=h(),r=U(),p=$("forgot",()=>!1),n=m(),c=m(),f=m({method:"post",data:{},url:`${v.public.BE_API}/auth/login`,timeout:15e3}),o=m({email:null,password:null}),t=()=>{if(console.log("logging..."),c.value,!o.value.email||!o.value.password){x(null);return}console.log("Passed");const{email:d,password:l}=o.value;f.value.data={email:d,password:l},S.request(f.value).then(i=>{console.log("status: ",i.data),r.login(i.data)}).catch(i=>{const e=i.response;console.log("Status: ",e==null?void 0:e.status),(e==null?void 0:e.status)!==null&&((e==null?void 0:e.status)===401||(e==null?void 0:e.status)===404)&&!e.data.message.includes("/")?(c.value=e.data.message,console.log(i.message)):x(null),console.log(e)}).finally(()=>{n.value.removeAttribute("data-kt-indicator")})};return q(()=>{r.isAuthenticated()&&r.login(r.userData.value)}),(d,l)=>{const i=E,e=N,B=K;return _(),b("div",X,[s("div",Z,[s("div",R,[s("div",ss,[y(i,{classes:"h-60px"}),es,ts])]),a(p)?(_(),j(B,{key:1})):(_(),b("div",os,[s("div",as,[s("div",ls,[s("div",ns,[s("form",{onSubmit:P(t,["prevent"]),class:"form w-100",novalidate:"",id:"kt_sign_in_form"},[rs,cs,s("div",ds,[w(s("input",{type:"text",placeholder:"Email",name:"email",autocomplete:"on",class:"form-control bg-transparent",required:"","onUpdate:modelValue":l[0]||(l[0]=g=>a(o).email=g)},null,512),[[k,a(o).email]])]),s("div",ms,[w(s("input",{type:"password",placeholder:"Password",name:"password",autocomplete:"on",class:"form-control bg-transparent","onUpdate:modelValue":l[1]||(l[1]=g=>a(o).password=g),required:""},null,512),[[k,a(o).password]])]),a(c)?(_(),b("div",us,F(a(c)),1)):I("",!0),s("div",_s,[ps,s("a",{onClick:l[2]||(l[2]=g=>p.value=!0),role:"button",class:"link-primary"}," Forgot Password ? ")]),s("div",fs,[s("button",{ref_key:"submitButton",ref:n,type:"submit",id:"kt_sign_in_submit",class:"btn btn-primary"},xs,512)]),s("div",vs,[u(" Not a Member yet? "),y(e,{to:"/sign-up",class:"link-primary"},{default:M(()=>[u(" Sign up ")]),_:1})])],40,is)])])])]))])])}}});export{Es as default};
