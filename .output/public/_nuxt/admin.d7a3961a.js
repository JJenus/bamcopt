import{u as r,_ as f}from"./entry.b0da6ac6.js";import{u as _}from"./index.4d0f0352.js";import{b as i,a as s,u as n}from"./userData.2f85955e.js";import{i as c}from"./showAlert.1825e18a.js";import{a as v}from"./axios.82afda87.js";import{j as x,X as h,x as A,D as k}from"./swiper-vue.487844c5.js";const D="Admin",M=x({__name:"admin",setup(B){var u;i("reload",{maxAge:60*60*24});const l=r(),m=(u=s().userData.value)==null?void 0:u.userId,t=n().data,d=n().users,p=r().public;_({title:`${D} - ${p.APP}`});const g=()=>{var o;s().userData.value||(s().logout(),c("Session expired, please login."));const a={method:"get",url:`${l.public.BE_API}/users/${m}`,timeout:15e3,headers:{Authorization:"Bearer "+((o=s().userData.value)==null?void 0:o.token)}};v.request(a).then(e=>{t.value=e.data,t.value.imgUrl=t.value.imgUrl||"/assets/media/svg/avatars/blank.svg"}).catch(e=>{(e.response.data.message.includes("Access denied")||e.response.status===401)&&(console.log("Access denied"),s().logout())})};return h(()=>{const a=i("auth");if(a.value==null||a.value==null)return c("Session expired"),s().logout();g(),d.value.length===0&&n().getUsers()}),(a,o)=>{const e=f;return A(),k(e)}}});export{M as default};
