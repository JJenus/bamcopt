import{u as A}from"./entry.b0da6ac6.js";import{u as D,a as l}from"./userData.2f85955e.js";import{i as B}from"./showAlert.1825e18a.js";import{a as C}from"./axios.82afda87.js";import{h as b}from"./moment.fbc5633a.js";import{j as I,a as x,x as m,y as f,B as t,R as d,H as s,u,I as S,V as g,L as T}from"./swiper-vue.487844c5.js";const q=""+globalThis.__publicAssetsURL("assets/media/avatars/300-2.jpg"),N=t("div",null,null,-1),R={class:"symbol symbol-circle symbol-45px me-4"},V=t("img",{src:q,class:"d-none",alt:""},null,-1),Y={class:"d-flex align-items-center flex-row-fluid flex-wrap"},$={class:"flex-grow-1 me-2"},j={role:"button",class:"text-hover-primary text-gray-800 fs-5 fw-bolder",style:{color:"#28346c"}},E={class:"text-gray-400 fw-semibold d-block fs-n6"},z={class:"text-primary me-2"},L={class:"d-flex flex-column text-end"},M={class:"text-gray-800 fw-bold fs-6"},U={class:"text-gray-400 text-truncate w-80px"},F={key:0,class:"ms-2"},H={key:0,class:"mb-10 px-8 rounded-2 border-dashed pt-4 border-2 border-gray-500 px-md-15 px-lg-20"},O={class:"table-responsive w-100"},P={class:"table fs-6"},G=t("td",{class:"fw-semibold"},"Bank",-1),J={class:"text-end"},K=t("td",{class:"fw-semibold"},"Name",-1),Q={class:"text-end"},W=t("td",{class:"fw-semibold"},"Account",-1),X={class:"text-end"},Z=t("td",{class:"fw-semibold"},"transactionId",-1),tt={class:"text-end"},st=t("td",{class:"fw-semibold"},"Time",-1),et={class:"text-end"},at={class:"my-3"},nt=["href"],mt=I({__name:"Entry",props:{showDetails:{type:Boolean,required:!1,default:!1},transaction:{type:Object,required:!0}},setup(e){const a=e,i=x({name:""}),p=A(),y=()=>{var o;l().userData.value||(l().logout(),B("Session expired, please login."));const n={method:"get",url:`${p.public.BE_API}/users/${a.transaction.receiverId}`,timeout:15e3,headers:{Authorization:"Bearer "+((o=l().userData.value)==null?void 0:o.token)}};C.request(n).then(r=>{i.value=r.data}).catch(r=>{(r.response.data.message.includes("Access denied")||r.response.status===401)&&(console.log("Access denied"),l().logout())})},c=x(!1),w=()=>a.transaction.receiverId===D().data.value.id?(y(),"Received"):(i.value.name=a.transaction.beneficiary.name,"Sent"),h=n=>a.transaction.status==="pending"?n+"-warning":a.transaction.status==="failed"?n+"-danger":n+"-success",v=()=>a.transaction.status==="pending"?"ki-information-5 text-warning":a.transaction.status==="failed"?"ki-cross-circle text-danger":"ki-check-circle text-success",_=()=>{const n=b(),o=b(a.transaction.createdAt);return n.diff(o,"hours")<=1?o.fromNow():n.isSame(o,"day")?o.format("hh:mm A"):o.format("DD/MM/YYYY hh:mm A")},k=()=>{a.showDetails&&(c.value=!c.value)};return(n,o)=>(m(),f(T,null,[N,t("div",{class:"d-flex flex-stack mb-6",onClick:k},[t("div",R,[V,t("i",{class:d([v(),"ki-outline fs-1"])},null,2)]),t("div",Y,[t("div",$,[t("a",j,s(u(i).name),1),t("span",E,[t("span",z,s(w()),1),S(" "+s(_()),1)])]),t("div",L,[t("span",M,"$"+s(e.transaction.amount),1),t("div",U,s(e.transaction.beneficiary.bank),1)]),e.showDetails?(m(),f("div",F,[t("i",{class:d([u(c)?"ki-up-square":"ki-down-square","ki-outline mt-5 mt-lg-1 text-primary fs-2x"])},null,2)])):g("",!0)])]),u(c)?(m(),f("div",H,[t("div",O,[t("table",P,[t("tbody",null,[t("tr",null,[G,t("td",J,s(u(i).name),1)]),t("tr",null,[K,t("td",Q,s(e.transaction.beneficiary.name),1)]),t("tr",null,[W,t("td",X,s(e.transaction.beneficiary.destinationAccount),1)]),t("tr",null,[t("td",null,[t("span",{class:d(["badge fw-bold pt-1",h("bg")])},"Status",2)]),t("td",{class:d(["text-end",h("text")])},s(e.transaction.status),3)]),t("tr",null,[Z,t("td",tt,s(e.transaction.transactionId),1)]),t("tr",null,[st,t("td",et,s(_()),1)])])])]),t("div",at,[t("a",{href:`/track/transaction?id=${e.transaction.transactionId}`,class:"btn btn-outline btn-bg-light-info btn-color-info btn-active-light-success w-100"},"Track process",8,nt)])])):g("",!0)],64))}});export{mt as _};
