import{u as r,_ as d}from"./entry.b0da6ac6.js";import{u as m}from"./index.4d0f0352.js";import{b as f,a as e,u as g}from"./userData.2f85955e.js";import{i}from"./showAlert.1825e18a.js";import{a as _}from"./axios.82afda87.js";import{j as v,X as x,x as A,D as h}from"./swiper-vue.487844c5.js";const U=v({__name:"app",setup(k){var n;m({title:`App - ${r().public.APP}`});const u=f("reload",{maxAge:60*60*24});u.value||(window.location.reload(),u.value=!0);const l=r(),c=(n=e().userData.value)==null?void 0:n.userId,s=g().data,p=()=>{var t;e().userData.value||(e().logout(),i("Session expired, please login."));const a={method:"get",url:`${l.public.BE_API}/users/${c}`,timeout:15e3,headers:{Authorization:"Bearer "+((t=e().userData.value)==null?void 0:t.token)}};_.request(a).then(o=>{s.value=o.data,s.value.imgUrl=s.value.imgUrl||"/assets/media/svg/avatars/blank.svg"}).catch(o=>{(o.response.data.message.includes("Access denied")||o.response.status===401)&&(console.log("Access denied"),e().logout())})};return x(()=>{const a=e().userAuth;if(a.value===null||a.value===void 0)return console.log(a.value),i("Session expired"),e().logout();p()}),(a,t)=>{const o=d;return A(),h(o)}}});export{U as default};
