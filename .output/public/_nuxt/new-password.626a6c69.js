import{_ as h}from"./nuxt-link.51c38150.js";import{j as w,a as l,a2 as k,x as v,y as x,B as s,z as _,P as y,I as n,A as P,N as p,O as m,u as i}from"./swiper-vue.487844c5.js";import{d as A,a as B,n as N,u as C}from"./entry.b0da6ac6.js";import{e as u,i as S,s as T}from"./showAlert.1825e18a.js";import{a as U}from"./axios.82afda87.js";const V=""+globalThis.__publicAssetsURL("assets/media/auth/password-changed.png"),q={class:"d-flex card flex-column flex-root border"},L={class:"d-flex card-body flex-column flex-lg-row flex-column-fluid"},R={class:"d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center"},j={class:"d-flex flex-column flex-center p-6 p-lg-10 w-100"},D=s("img",{class:"d-none d-lg-block mx-auto w-300px w-lg-75 w-xl-500px mb-10 mb-lg-20",src:V,alt:""},null,-1),E=s("h1",{class:"d-none d-lg-block text-white fs-2qx fw-bold text-center mb-7"}," Forgot your password? No worries! ",-1),I={class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10"},z={class:"d-flex flex-center flex-column flex-lg-row-fluid"},H={class:"card w-lg-500px p-md-10"},M={class:"card-body"},Z={class:"text-center mb-10",bis_skin_checked:"1"},$=s("h1",{class:"text-dark fw-bolder mb-3"}," Setup New Password ",-1),F={class:"text-gray-500 fw-semibold fs-6",bis_skin_checked:"1"},O={class:"fv-row mb-8 fv-plugins-icon-container","data-kt-password-meter":"true",bis_skin_checked:"1"},G={class:"mb-1",bis_skin_checked:"1"},J={class:"position-relative mb-3",bis_skin_checked:"1"},K=s("span",{class:"btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2","data-kt-password-meter-control":"visibility"},[s("i",{class:"ki-outline ki-eye-slash fs-2"}),s("i",{class:"ki-outline ki-eye fs-2 d-none"})],-1),Q=s("div",{class:"d-flex align-items-center mb-3","data-kt-password-meter-control":"highlight",bis_skin_checked:"1"},[s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px",bis_skin_checked:"1"})],-1),W=s("div",{class:"text-muted",bis_skin_checked:"1"}," Use 8 or more characters with a mix of letters, numbers & symbols. ",-1),X=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},null,-1),Y={class:"fv-row mb-8 fv-plugins-icon-container",bis_skin_checked:"1"},ss=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},null,-1),es=s("div",{class:"fv-row d-none mb-8 fv-plugins-icon-container",bis_skin_checked:"1"},[s("label",{class:"form-check form-check-inline"},[s("input",{class:"form-check-input",type:"checkbox",name:"toc",value:"1",checked:""}),s("span",{class:"form-check-label fw-semibold text-gray-700 fs-6 ms-1"},[n(" I Agree & "),s("a",{href:"#",class:"ms-1 link-primary"},"Terms and conditions"),n(". ")])]),s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"})],-1),os={class:"d-grid mb-10",bis_skin_checked:"1"},ts=s("span",{class:"indicator-label"}," Submit",-1),as=s("span",{class:"indicator-progress"},[n(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),ns=[ts,as],ps=w({__name:"new-password",setup(is){A({script:[{src:"/assets/js/custom/authentication/reset-password/new-password.js"}]});const f=C(),d=l(),r=B().query.token,e=l({id:r,password:"",cPassword:""});console.log(r),l(!1);const b=()=>{if(!e.value.password||e.value.password!==e.value.cPassword)return u("Errors detected in the form!");if(!e.value.id){S("Please follow the link on your email or request for password reset again!"),N("/sign-in");return}const{cPassword:g,...o}=e.value,c={method:"post",data:o,url:`${f.public.BE_API}/auth/reset-password`,timeout:15e3};console.log("Saving..."),U.request(c).then(t=>{const a=t.data;console.log(a),T("Success. Proceed to sign in.")}).catch(t=>{console.log(t),t.response.data,u("Unable to set new password. Try again.")}).finally(()=>{console.log("Done..."),d.value.removeAttribute("data-kt-indicator")})};return(g,o)=>{const c=k("ZipayLogo"),t=h;return v(),x("div",q,[s("div",L,[s("div",R,[s("div",j,[_(c,{classes:"h-40px h-lg-60px","app-class":"logo-color d-block"}),D,E])]),s("div",I,[s("div",z,[s("div",H,[s("div",M,[s("form",{class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"",id:"kt_new_password_form",onSubmit:o[2]||(o[2]=y(a=>b(),["prevent"]))},[s("div",Z,[$,s("div",F,[n(" Have you already reset the password ? "),_(t,{to:"/sign-in",class:"link-primary fw-bold",bis_skin_checked:"1"},{default:P(()=>[n(" Sign in ")]),_:1})])]),s("div",O,[s("div",G,[s("div",J,[p(s("input",{class:"form-control bg-transparent",type:"password",placeholder:"Password",name:"password",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=a=>i(e).password=a)},null,512),[[m,i(e).password]]),K]),Q]),W,X]),s("div",Y,[p(s("input",{type:"password",placeholder:"Repeat Password",name:"confirm-password",autocomplete:"off",class:"form-control bg-transparent","onUpdate:modelValue":o[1]||(o[1]=a=>i(e).cPassword=a)},null,512),[[m,i(e).cPassword]]),ss]),es,s("div",os,[s("button",{type:"submit",id:"kt_new_password_submit",class:"btn btn-primary",ref_key:"submitButton",ref:d},ns,512)])],32)])])])])])])}}});export{ps as default};
