import{u,_ as f}from"./92L2RCN-.js";import{u as i}from"./BR2hkClM.js";import{u as s,a as n}from"./CGGBS1J1.js";import{u as _}from"./DZnjc9Xn.js";import{i as c}from"./BsrlggJy.js";import{a as v}from"./CgRmDqS1.js";import{d as A,I as h,o as x,A as k}from"./C1v_YKik.js";import"./BiM5rvw0.js";import"./Cpj98o6Y.js";const B="Admin",E=A({__name:"admin",setup(C){var r;i("reload",{maxAge:60*60*24});const l=u(),m=(r=s().userData.value)==null?void 0:r.userId,a=n().data,p=n().users,d=u().public;_({title:`${B} - ${d.APP}`});const g=()=>{var t;s().userData.value||(s().logout(),c("Session expired, please login."));const o={method:"get",url:`${l.public.BE_API}/users/${m}`,timeout:15e3,headers:{Authorization:"Bearer "+((t=s().userData.value)==null?void 0:t.token)}};v.request(o).then(e=>{a.value=e.data,a.value.imgUrl=a.value.imgUrl||"/assets/media/svg/avatars/blank.svg"}).catch(e=>{(e.response.data.message.includes("Access denied")||e.response.status===401)&&(console.log("Access denied"),s().logout())})};return h(()=>{const o=i("auth");if(o.value==null||o.value==null)return c("Session expired"),s().logout();g(),p.value.length===0&&n().getUsers()}),(o,t)=>{const e=f;return x(),k(e)}}});export{E as default};
