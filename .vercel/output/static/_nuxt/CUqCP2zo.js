import{_ as E}from"./C5I16zcb.js";import{_ as q}from"./D_kPoFKT.js";import{u as h}from"./92L2RCN-.js";import{d as $,c as m,o as p,l as b,y as s,P as C,N as w,O as k,u as a,G as u,J as N,q as y,E as V,R as F,x as M,A as I}from"./C1v_YKik.js";import{b as P,u as j}from"./CGGBS1J1.js";import{e as x,s as D}from"./BsrlggJy.js";import{a as S}from"./CgRmDqS1.js";import{u as T}from"./DZnjc9Xn.js";import{_ as U}from"./EAhqnbMt.js";import{u as L}from"./BiM5rvw0.js";import"./D1pW-EBp.js";import"./DlAUqK2U.js";import"./BR2hkClM.js";import"./Cpj98o6Y.js";const z={class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10",bis_skin_checked:"1"},G={class:"d-flex flex-center flex-column flex-lg-row-fluid",bis_skin_checked:"1"},H={class:"w-lg-500px p-10",bis_skin_checked:"1"},J=s("div",{class:"text-center mb-10",bis_skin_checked:"1"},[s("h1",{class:"text-dark fw-bolder mb-3"}," Forgot Password ? "),s("div",{class:"text-gray-500 fw-semibold fs-6",bis_skin_checked:"1"},[u(" Enter your email to reset your password. "),s("br")])],-1),O={class:"fv-row mb-8 fv-plugins-icon-container fv-plugins-bootstrap5-row-invalid",bis_skin_checked:"1"},W=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},[s("div",{"data-field":"email","data-validator":"notEmpty",bis_skin_checked:"1"},[u(" Email address is required. "),s("br"),s("small",{class:"fs-7 text-info"},"You'll receive a password reset email if your account exists.")])],-1),Y={class:"d-flex flex-wrap justify-content-center pb-lg-0",bis_skin_checked:"1"},K=s("button",{type:"submit",id:"kt_password_reset_submit",class:"btn btn-primary me-4"},[s("span",{class:"indicator-label"}," Submit"),s("span",{class:"indicator-progress"},[u(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),Q=$({__name:"ForgotPassword",setup(A){const v=h(),r=m(!1),_=P("forgot"),n=m({email:""}),c=()=>{_.value=!1},f=()=>{if(!n.value.email)return x(null);const o={method:"post",data:n.value,url:`${v.public.BE_API}/auth/request-password-reset`,timeout:15e3};S.request(o).then(t=>{console.log(t.data),D("Sent. Check your email to continue")}).catch(t=>{x("Account was not found. Check your email and try again."),console.log(t),t.response.data}).finally(()=>{r.value=!1})};return(o,t)=>(p(),b("div",z,[s("div",G,[s("div",H,[s("form",{onSubmit:t[2]||(t[2]=C(d=>f(),["prevent"])),class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"",id:"kt_password_reset_form",action:"#"},[J,s("div",O,[w(s("input",{type:"text",placeholder:"Email",name:"email",class:"form-control bg-transparent","onUpdate:modelValue":t[0]||(t[0]=d=>a(n).email=d)},null,512),[[k,a(n).email]]),W]),s("div",Y,[K,s("a",{onClick:t[1]||(t[1]=d=>c()),role:"button",class:"btn btn-light",bis_skin_checked:"1"},"Cancel")])],32)])])]))}}),X={class:"d-flex card flex-column flex-root border"},Z={class:"d-flex card-body flex-column flex-lg-row flex-column-fluid"},R={class:"d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center"},ss={class:"d-flex flex-column flex-center p-6 p-lg-10 w-100"},es=s("img",{class:"d-none d-lg-block mx-auto w-300px w-lg-75 w-xl-250px mb-10 mb-lg-20 mt-15",src:U,alt:""},null,-1),ts=s("h1",{class:"d-none d-lg-block text-white fs-2qx fw-bold text-center mb-7"}," Welcome Back ",-1),os={key:0,class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10"},as={class:"d-flex flex-center flex-column flex-lg-row-fluid"},ls={class:"card w-lg-500px p-md-10"},ns={class:"card-body"},is=s("div",{class:"text-center mb-11"},[s("h1",{class:"text-dark fw-bolder mb-3"}," Sign In ")],-1),rs=s("div",{class:"separator separator-content my-14"},null,-1),cs={class:"fv-row mb-8"},ds={class:"fv-row mb-3"},ms={key:0,class:"text-danger fs-sm mt-3 mb-3"},us={class:"d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8"},ps=s("div",null,null,-1),_s={class:"d-grid mb-10"},fs=s("span",{class:"indicator-label"}," Sign In",-1),gs=s("span",{class:"indicator-progress"},[u(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),bs=[fs,gs],xs={class:"text-gray-500 text-center fw-semibold fs-6"},Vs=$({__name:"sign-in",setup(A){T({title:`Sign in - ${h().public.APP}`}),L({script:[{src:"/assets/js/custom/authentication/sign-in/general.js"}]});const v=h(),r=j(),_=P("forgot",()=>!1),n=m(),c=m(),f=m({method:"post",data:{},url:`${v.public.BE_API}/auth/login`,timeout:15e3}),o=m({email:null,password:null}),t=()=>{if(console.log("logging..."),c.value,!o.value.email||!o.value.password){x(null);return}console.log("Passed");const{email:d,password:l}=o.value;f.value.data={email:d,password:l},S.request(f.value).then(i=>{console.log("status: ",i.data),r.login(i.data)}).catch(i=>{const e=i.response;console.log("Status: ",e==null?void 0:e.status),(e==null?void 0:e.status)!==null&&((e==null?void 0:e.status)===401||(e==null?void 0:e.status)===404)&&!e.data.message.includes("/")?(c.value=e.data.message,console.log(i.message)):x(null),console.log(e)}).finally(()=>{n.value.removeAttribute("data-kt-indicator")})};return N(()=>{r.isAuthenticated()&&r.login(r.userData.value)}),(d,l)=>{const i=E,e=q,B=Q;return p(),b("div",X,[s("div",Z,[s("div",R,[s("div",ss,[y(i,{classes:"h-60px"}),es,ts])]),a(_)?(p(),I(B,{key:1})):(p(),b("div",os,[s("div",as,[s("div",ls,[s("div",ns,[s("form",{onSubmit:C(t,["prevent"]),class:"form w-100",novalidate:"",id:"kt_sign_in_form"},[is,rs,s("div",cs,[w(s("input",{type:"text",placeholder:"Email",name:"email",autocomplete:"on",class:"form-control bg-transparent",required:"","onUpdate:modelValue":l[0]||(l[0]=g=>a(o).email=g)},null,512),[[k,a(o).email]])]),s("div",ds,[w(s("input",{type:"password",placeholder:"Password",name:"password",autocomplete:"on",class:"form-control bg-transparent","onUpdate:modelValue":l[1]||(l[1]=g=>a(o).password=g),required:""},null,512),[[k,a(o).password]])]),a(c)?(p(),b("div",ms,V(a(c)),1)):F("",!0),s("div",us,[ps,s("a",{onClick:l[2]||(l[2]=g=>_.value=!0),role:"button",class:"link-primary"}," Forgot Password ? ")]),s("div",_s,[s("button",{ref_key:"submitButton",ref:n,type:"submit",id:"kt_sign_in_submit",class:"btn btn-primary"},bs,512)]),s("div",xs,[u(" Not a Member yet? "),y(e,{to:"/sign-up",class:"link-primary"},{default:M(()=>[u(" Sign up ")]),_:1})])],32)])])])]))])])}}});export{Vs as default};
