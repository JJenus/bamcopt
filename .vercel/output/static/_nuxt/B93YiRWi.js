import{u as n,_ as p}from"./92L2RCN-.js";import{u as m}from"./DZnjc9Xn.js";import{u as e,a as d}from"./CGGBS1J1.js";import{i as r}from"./BsrlggJy.js";import{a as f}from"./CgRmDqS1.js";import{d as g,I as _,o as v,A}from"./C1v_YKik.js";import"./BiM5rvw0.js";import"./BR2hkClM.js";import"./Cpj98o6Y.js";const $=g({__name:"app",setup(h){var u;m({title:`App - ${n().public.APP}`});const i=n(),l=(u=e().userData.value)==null?void 0:u.userId,t=d().data,c=()=>{var s;e().userData.value||(e().logout(),r("Session expired, please login."));const o={method:"get",url:`${i.public.BE_API}/users/${l}`,timeout:15e3,headers:{Authorization:"Bearer "+((s=e().userData.value)==null?void 0:s.token)}};f.request(o).then(a=>{t.value=a.data,t.value.imgUrl=t.value.imgUrl||"/assets/media/svg/avatars/blank.svg"}).catch(a=>{(a.response.data.message.includes("Access denied")||a.response.status===401)&&(console.log("Access denied"),e().logout())})};return _(()=>{const o=e().userAuth;if(o.value===null||o.value===void 0)return console.log(o.value),r("Session expired"),e().logout();c()}),(o,s)=>{const a=p;return v(),A(a)}}});export{$ as default};
