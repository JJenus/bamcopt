import{u as A}from"./CQQ8cjCY.js";import{u as C}from"./92L2RCN-.js";import{a as S,u as l}from"./CGGBS1J1.js";import{a as B}from"./CgRmDqS1.js";import{h as b}from"./D15uM1gO.js";import{d as I,c as g,o as d,l as u,y as t,L as o,E as e,u as r,R as m}from"./C1v_YKik.js";const q={class:""},E={class:"symbol symbol-circle symbol-45px"},N={class:"d-flex align-items-center flex-row-fluid flex-wrap"},T={class:"d-flex align-items-center flex-row-fluid justify-content-between"},M={class:"d-flex flex-column"},R={class:"text-hover-primary text-gray-800 fs-5 fw-bolder",style:{color:"#28346c"}},$={class:"text-gray-400 fw-semibold fs-n6"},z={class:"d-flex flex-column text-end"},H={class:"text-gray-400 text-truncate w-80pxiu"},V={key:0,class:"ms-2"},Y={key:0,class:"ms-2 d-none"},j={key:0,class:"mb-10 px-8 rounded-2 border-dashed pt-4 border-2 border-gray-500 px-md-15 px-lg-20"},L={class:"table-responsive w-100"},P={class:"table fs-6"},U=t("td",{class:"fw-semibold"},"Bank",-1),F={class:"text-end"},G=t("td",{class:"fw-semibold"},"Name",-1),J={class:"text-end"},K=t("td",{class:"fw-semibold"},"Account",-1),O={class:"text-end"},Q=t("td",{class:"fw-semibold"},"transactionId",-1),W={class:"text-end"},X=t("td",{class:"fw-semibold"},"Time",-1),Z={class:"text-end"},tt={class:"my-3"},st=["href"],lt=I({__name:"Entry",props:{transaction:{},showDetails:{type:Boolean}},setup(x){const y=A().formatMoney,n=x,f=g({name:""}),w=C(),k=()=>{var a;if(!l().userData.value)return l().logout();const s={method:"get",url:`${w.public.BE_API}/users/${n.transaction.receiverId}`,timeout:15e3,headers:{Authorization:"Bearer "+((a=l().userData.value)==null?void 0:a.token)}};B.request(s).then(c=>{f.value=c.data}).catch(c=>{(c.response.data.message.includes("Access denied")||c.response.status===401)&&(console.log("Access denied"),l().logout())})},i=g(!1),h=()=>n.transaction.receiverId===S().data.value.id?(k(),"Received"):(f.value.name=n.transaction.beneficiary.name,"Sent"),_=s=>n.transaction.status==="pending"?s+"-warning":n.transaction.status==="failed"?s+"-danger":s+"-success",v=()=>n.transaction.status==="pending"?"ki-information-5 text-warning":n.transaction.status==="failed"?"ki-cross-circle text-danger":"ki-check-circle text-success",p=()=>{const s=b(),a=b(n.transaction.createdAt);return s.diff(a,"hours")<=1?a.fromNow():s.isSame(a,"day")?a.format("hh:mm A"):a.format("DD/MM/YY HH:mm")},D=()=>{n.showDetails&&(i.value=!i.value)};return(s,a)=>(d(),u("div",q,[t("div",{class:o([r(i)?"shadow rounded px-3 mx-n4":"","d-flex flex-stack gap-3 mb-6"]),onClick:D},[t("div",E,[t("i",{class:o([v(),"ki-outline fs-1"])},null,2)]),t("div",N,[t("div",T,[t("div",M,[t("span",R,e(r(f).name),1),t("span",$,e(p()),1)]),t("div",z,[t("span",{class:o([h()=="Sent"?"text-success":"text-danger","fw-bold fs-6"])},e(h()=="Sent"?"+":"-")+" "+e(r(y)(s.transaction.amount,!0)),3),t("div",H,e(s.transaction.beneficiary.bank),1)]),s.showDetails?(d(),u("div",V,[t("i",{class:o([r(i)?"ki-up-square":"ki-down-square","ki-outline mt-5 mt-lg-1 text-primary fs-2x"])},null,2)])):m("",!0)]),s.showDetails?(d(),u("div",Y,[t("i",{class:o([r(i)?"ki-up-square":"ki-down-square","ki-outline mt-5 mt-lg-1 text-primary fs-2"])},null,2)])):m("",!0)])],2),r(i)?(d(),u("div",j,[t("div",L,[t("table",P,[t("tbody",null,[t("tr",null,[U,t("td",F,e(s.transaction.beneficiary.bank),1)]),t("tr",null,[G,t("td",J,e(s.transaction.beneficiary.name),1)]),t("tr",null,[K,t("td",O,e(s.transaction.beneficiary.destinationAccount),1)]),t("tr",null,[t("td",null,[t("span",{class:o(["badge fw-bold pt-1",_("bg")])},"Status",2)]),t("td",{class:o(["text-end",_("text")])},e(s.transaction.status),3)]),t("tr",null,[Q,t("td",W,e(s.transaction.transactionId),1)]),t("tr",null,[X,t("td",Z,e(p()),1)])])])]),t("div",tt,[t("a",{href:`/track/transaction?id=${s.transaction.transactionId}`,class:"btn btn-outline btn-bg-light-info btn-color-info btn-active-light-success w-100"},"Track process",8,st)])])):m("",!0)]))}});export{lt as _};
