import{_ as h}from"./D_kPoFKT.js";import{d as w,c as l,a2 as k,o as v,l as x,y as s,q as p,P as y,G as n,x as P,N as _,O as m,u as i}from"./C1v_YKik.js";import{p as A,a as N,n as B,u as C}from"./92L2RCN-.js";import{u as S}from"./BiM5rvw0.js";import{e as u,i as q,s as T}from"./BsrlggJy.js";import{a as U}from"./CgRmDqS1.js";import"./Cpj98o6Y.js";const V=A("/assets/media/auth/password-changed.png"),L={class:"d-flex card flex-column flex-root border"},R={class:"d-flex card-body flex-column flex-lg-row flex-column-fluid"},D={class:"d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center"},E={class:"d-flex flex-column flex-center p-6 p-lg-10 w-100"},j=s("img",{class:"d-none d-lg-block mx-auto w-300px w-lg-75 w-xl-500px mb-10 mb-lg-20",src:V,alt:""},null,-1),H=s("h1",{class:"d-none d-lg-block text-white fs-2qx fw-bold text-center mb-7"}," Forgot your password? No worries! ",-1),I={class:"d-flex flex-column flex-lg-row-fluid w-lg-50 p-10"},M={class:"d-flex flex-center flex-column flex-lg-row-fluid"},Z={class:"card w-lg-500px p-md-10"},$={class:"card-body"},z={class:"text-center mb-10",bis_skin_checked:"1"},F=s("h1",{class:"text-dark fw-bolder mb-3"}," Setup New Password ",-1),G={class:"text-gray-500 fw-semibold fs-6",bis_skin_checked:"1"},O={class:"fv-row mb-8 fv-plugins-icon-container","data-kt-password-meter":"true",bis_skin_checked:"1"},J={class:"mb-1",bis_skin_checked:"1"},K={class:"position-relative mb-3",bis_skin_checked:"1"},Q=s("span",{class:"btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2","data-kt-password-meter-control":"visibility"},[s("i",{class:"ki-outline ki-eye-slash fs-2"}),s("i",{class:"ki-outline ki-eye fs-2 d-none"})],-1),W=s("div",{class:"d-flex align-items-center mb-3","data-kt-password-meter-control":"highlight",bis_skin_checked:"1"},[s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2",bis_skin_checked:"1"}),s("div",{class:"flex-grow-1 bg-secondary bg-active-success rounded h-5px",bis_skin_checked:"1"})],-1),X=s("div",{class:"text-muted",bis_skin_checked:"1"}," Use 8 or more characters with a mix of letters, numbers & symbols. ",-1),Y=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},null,-1),ss={class:"fv-row mb-8 fv-plugins-icon-container",bis_skin_checked:"1"},es=s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"},null,-1),os=s("div",{class:"fv-row d-none mb-8 fv-plugins-icon-container",bis_skin_checked:"1"},[s("label",{class:"form-check form-check-inline"},[s("input",{class:"form-check-input",type:"checkbox",name:"toc",value:"1",checked:""}),s("span",{class:"form-check-label fw-semibold text-gray-700 fs-6 ms-1"},[n(" I Agree & "),s("a",{href:"#",class:"ms-1 link-primary"},"Terms and conditions"),n(". ")])]),s("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback",bis_skin_checked:"1"})],-1),ts={class:"d-grid mb-10",bis_skin_checked:"1"},as=s("span",{class:"indicator-label"}," Submit",-1),ns=s("span",{class:"indicator-progress"},[n(" Please wait... "),s("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})],-1),is=[as,ns],fs=w({__name:"new-password",setup(cs){S({script:[{src:"/assets/js/custom/authentication/reset-password/new-password.js"}]});const f=C(),d=l(),r=N().query.token,e=l({id:r,password:"",cPassword:""});console.log(r),l(!1);const b=()=>{if(!e.value.password||e.value.password!==e.value.cPassword)return u("Errors detected in the form!");if(!e.value.id){q("Please follow the link on your email or request for password reset again!"),B("/sign-in");return}const{cPassword:g,...o}=e.value,c={method:"post",data:o,url:`${f.public.BE_API}/auth/reset-password`,timeout:15e3};console.log("Saving..."),U.request(c).then(t=>{const a=t.data;console.log(a),T("Success. Proceed to sign in.")}).catch(t=>{console.log(t),t.response.data,u("Unable to set new password. Try again.")}).finally(()=>{console.log("Done..."),d.value.removeAttribute("data-kt-indicator")})};return(g,o)=>{const c=k("ZipayLogo"),t=h;return v(),x("div",L,[s("div",R,[s("div",D,[s("div",E,[p(c,{classes:"h-40px h-lg-60px","app-class":"logo-color d-block"}),j,H])]),s("div",I,[s("div",M,[s("div",Z,[s("div",$,[s("form",{class:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",novalidate:"",id:"kt_new_password_form",onSubmit:o[2]||(o[2]=y(a=>b(),["prevent"]))},[s("div",z,[F,s("div",G,[n(" Have you already reset the password ? "),p(t,{to:"/sign-in",class:"link-primary fw-bold",bis_skin_checked:"1"},{default:P(()=>[n(" Sign in ")]),_:1})])]),s("div",O,[s("div",J,[s("div",K,[_(s("input",{class:"form-control bg-transparent",type:"password",placeholder:"Password",name:"password",autocomplete:"off","onUpdate:modelValue":o[0]||(o[0]=a=>i(e).password=a)},null,512),[[m,i(e).password]]),Q]),W]),X,Y]),s("div",ss,[_(s("input",{type:"password",placeholder:"Repeat Password",name:"confirm-password",autocomplete:"off",class:"form-control bg-transparent","onUpdate:modelValue":o[1]||(o[1]=a=>i(e).cPassword=a)},null,512),[[m,i(e).cPassword]]),es]),os,s("div",ts,[s("button",{type:"submit",id:"kt_new_password_submit",class:"btn btn-primary",ref_key:"submitButton",ref:d},is,512)])],32)])])])])])])}}});export{fs as default};
